#!/bin/bash

SCRIPT_DIR="/home/lipatovdn/smiles_to_iupac2.0/model"
SCRIPT_NAME="__trainüöÄ.py"

while true; do
  cd "$SCRIPT_DIR" || {
    echo "–û—à–∏–±–∫–∞: –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é $SCRIPT_DIR"
    exit 1 
  }

  # –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –≤—ã–≤–æ–¥ –≤ —Ñ–∞–π–ª (–º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
  python3 "$SCRIPT_NAME" # > output.log 2>&1

  # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–¥ –≤–æ–∑–≤—Ä–∞—Ç–∞.  –ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É.
  if [ $? -ne 0 ]; then
      echo "–°–∫—Ä–∏–ø—Ç $SCRIPT_NAME –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π.  –ö–æ–¥ –≤–æ–∑–≤—Ä–∞—Ç–∞: $?"
      sleep 1
  fi

  echo "–°–∫—Ä–∏–ø—Ç $SCRIPT_NAME –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è..."

done